<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <title>HTML Custom Apps Final</title>

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet"    href="https://fonts.googleapis.com/css?family=EB Garamond" >
        <link rel="stylesheet"    href="https://fonts.googleapis.com/css?family=Roboto+Slab" >
        <link rel="stylesheet"    href="index_custom_bonus.css">

        <!-- INSERT Point - DATA FETCHING -->
            <script>                          // Can't be a module since it is executed last 
            async function getCountries( ) {      // Must define async function to use with await below  
          
                    var pResponse  = await          fetch( './assets/data/db.json' )
                    var pJSON      = await pResponse.json( ) 
          
                    var nRows      = 9999
                    var mCountries = pJSON.countries.filter( (pCountry, i) => { return i < nRows } )
          
                 return mCountries   
                        }          
            </script>        
        <!-- END INSERT Point - DATA FETCHING -->
    </head>

    <body>    

    <!-- REPLACE Point - Header -->
        <div class="Header">

        <!-- INSERT Point - Responsive -->
        <div class="MenuWrap">
            <input title="Menu" type="checkbox" class="Toggler">
            <div class="Hamburger"><div></div></div>
            <div class="Menu">
                <div>
                    <div>
                        <ul class="MenuList">
                            <li class="MenuListItem" id="H-PHLink" ><a href="#" >Home</a></li>
                            <li class="MenuListItemLine" id="PHLinkLine" ><hr></li>
                            <li class="MenuListItem" id="H-PHLinkCTA" ><a href="#" >Sign In</a></li>
                            <li class="MenuListItem" id="H-PHLink" ><a href="#" >Links</a></li>
                            <li class="MenuListItem" id="H-PHLink" ><a href="#" >Cards</a></li>
                            <li class="MenuListItem" id="H-PHLink" ><a href="#" >FAQs</a></li>
                            <li class="MenuListItemLine" id="PHLinkLine" ><hr></li>
                            <li class="MenuListItem" id="F-PHLink" ><a href="#" >Support</a></li>
                            <li class="MenuListItem" id="F-PHLink" ><a href="#" >Terms Of Use</a></li>
                            <li class="MenuListItemLine" id="PHLinkLine" ><hr></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- END INSERT Point - Responsive -->
        
            <!-- REPLACE Point Logo -->
                <div class="HeaderLogo"><a href="#"></a></div>
            <!-- END REPLACE Point - Logo -->

            <div class="HeaderSpacer"></div> 
            <ul class="HeaderNavList">
                <li class="HeaderNavListItem"><a href=#>Links</a></li>
                <li class="HeaderNavListItem"><a href=#>Cards</a></li>
                <li class="HeaderNavListItem"><a href=#>FAQs</a></li>
                <li class="HeaderNavListItemCTA"><a href=#>Sign In</a></li>
            </ul>
        </div>
    <!-- END REPLACE Point - Header -->

    <!-- REPLACE Point - Section1 -->
        <div class="Section1">
            <h2 class="Section1ImageText">world.countries_view</h2>
        </div>
    <!-- END REPLACE Point - Section1 -->

    <!-- REPLACE Point - Section2 -->        
        <div class="Section2">
            <!-- COUNTRY DATA RENDERING-->  
            <div class="countryList">
                <table class="CountryTable" cellspacing="0" align="center">
                    <tbody>
                    <tr>
                        <th class="CountryCode-th">Code</th>
                        <th class="Country-th">Country</th>
                        <th class="Continent-th">Continent</th>
                        <th class="Area-th">Area (mi<sup>2</sup>)</th>
                        <th class="Population-th">Population</th>                
                    </tr>
                <tbody id="Countries"></tbody>
                </table>

                <script type="module"> 
                    var  mCountries  =  await getCountries( )     // Must assign mCountries here with await                     
                    var  mHTMLrows   =  mCountries.map(  fmtCountry )
                         mHTMLrows.push ( `<tr class="lastRow" ><td colspan="5">formR eof</td></tr>` )
                    var  pCountries           =  document.getElementById( "Countries" )
                         pCountries.innerHTML =  mHTMLrows.join( "\n" )
            
                function  fmtCountry( pCountry, i ) {           
                    var  aColor      =  i % 2 == 1 ? '#EFF8F8'  : '#DEEEF7'
                    var  aID         = `id="R${ `${ i + 1 }`.padStart( 3, "0" )}"`
                    var  aHTMLrow    = `
                    <tr ${aID} Class="${`eachRow ${aColor}`}">
                        <td bgColor="${aColor}" class="CountryCode-td"> ${ pCountry.Code }</td>
                        <td bgColor="${aColor}" class="Country-td"> ${ pCountry.Name }</td>
                        <td bgColor="${aColor}" class="Continent-td"> ${ pCountry.Continent }</td>
                        <td bgColor="${aColor}" class="Area-td"> ${ pCountry.SurfaceArea }</td>
                        <td bgColor="${aColor}" class="Population-td"> ${ pCountry.Population }</td>
                    </tr> `
                return  aHTMLrow }
                </script>            
            </div>
            <!-- END COUNTRY DATA RENDERING -->  
        </div>
    <!-- END REPLACE Point - Section2 -->       

    <!-- REPLACE Point - Footer -->
        <div class="Footer">
            <ul class="FooterNavList">
                <li class="FooterNavListItem"><a href=#>Support</a></li>
                <li class="FooterNavListItem"><a href=#>Terms Of Use</a></li>
            </ul>
        </div>
    <!-- END REPLACE Point - Footer -->

    </body>
</html>
